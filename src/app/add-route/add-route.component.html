<!-- KOristiti ovdje HTTP requests od Angualra umejsto action method varijante -->
<form class="container" action="api/addRoute" method="POST">
  <br>
  <div class="form-group">
    <label for="routeName">Route name:</label>
    <input type="text" minlength="3" maxlength="40" class="form-control" name="routeName" placeholder="Add the route name" required autofocus [(ngModel)]="newRoute.name">
  </div>
  <div class="form-group">
    <label for="routeGrade">Route grade:</label>
    <select class="form-control" name="routeGrade" required [(ngModel)]="newRoute.grade">
      <option value="" disabled>Select route grade</option>
      <option *ngFor="let grade of grades">{{grade}}</option>
    </select>
  </div>
  <div class="form-group">
    <label for="routeGym">Gym:</label>
    <select class="form-control" name="routeGym" #routeGym required (change)="addGymSection(routeGym.value)" [(ngModel)]="newRoute.gym.id">
      <option value="" disabled>Select the gym</option>
      <option *ngFor="let gym of gyms" value="{{gym.id}}">{{gym.name}}, {{gym.city}}</option>
      <option value="null">+ Add new gym</option>
    </select>
  </div>
  <div *ngIf="showAddGymFields">
    <div class="form-group">
      <label for="gymName">Gym name:</label>
      <input type="text" minlength="3" maxlength="40" class="form-control" name="gymName" #gymName placeholder="Add the gym name" required [(ngModel)]="newRoute.gym.name">
    </div>
    <div class="form-group">
      <label for="gymCity">Gym city:</label>
      <input type="text" minlength="3" maxlength="30" class="form-control" name="gymCity" placeholder="Add the gym city" required [(ngModel)]="newRoute.gym.city">
    </div>
    <div class="form-group">
      <label for="gymCountry">Gym country:</label>
      <select class="form-control" name="gymCountry" required [(ngModel)]="newRoute.gym.country">
        <option value="" disabled>Add the gym country</option>
        <option *ngFor="let country of countries">{{country.name}}</option>
      </select>
    </div>
  </div>
  <div class="form-group">
    <label for="routeDescription">Route description (optional):</label>
    <input type="text" minlength="3" maxlength="300" class="form-control" name="routeDescription" placeholder="Add the route description" [(ngModel)]="newRoute.description">
  </div>
  <div class="form-group">
    <label for="routePhoto">Route photo:</label>
    <input type="file" class="form-control-file" #routePhoto name="routePhoto" accept="image/*" required (change)="fileCheck(routePhoto.files[0]);">
  </div>
  <button type="submit" class="btn btn-primary btn-info">Add route</button>
</form>

<!-- Preview of loaded photo -->
<br>
<div class="container">
  <h5>Preview</h5>
  <img [src]="newRoute.photo">
</div>
<p>{{diagnostic()}}</p>

